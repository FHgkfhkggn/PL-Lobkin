


repo_mapping = {
    0: "microsoft/vscode",
    1: "facebook/react",
    2: "tensorflow/tensorflow",
    3: "vuejs/vue",
    4: "airbnb/javascript",
    5: "torvalds/linux",
    6: "laravel/laravel",
    7: "flutter/flutter",
    8: "nodejs/node",
    9: "apache/incubator-dubbo"
}

GITHUB_API_BASE_URL = "https://api.github.com/repos/"

def get_github_repo_info(repo_name, last_digit):
    """Получение и обработка данных JSON для указанного репозитория GitHub."""
    try:
        repo_url = get_repo_url_from_last_digit(last_digit, repo_name)
        if repo_url is None:
            return f"Репозиторий не найден для последней цифры {last_digit} и имени {repo_name}"
        
        response = requests.get(repo_url)
        response.raise_for_status()
        data = response.json()
        
        repo_info = {
            'company': data.get('owner', {}).get('login', None),
            'created_at': data.get('created_at', None),
            'email': None,
            'id': data.get('id', None),
            'name': data.get('name', None),
            'url': data.get('html_url', None)
        }
        return repo_info
    except requests.exceptions.RequestException as e:
        return f"Ошибка при получении данных: {e}"
    except KeyError as e:
        return f"Ошибка при разборе JSON-ответа: Отсутствует ключ {e}"

def write_to_file(repo_info, filename="github_repo_info.json"):
    """Запись информации о репозитории в файл JSON."""
    try:
        with open(filename, 'w') as outfile:
            json.dump(repo_info, outfile, indent=4)
        print(f"Данные записаны в файл '{filename}'")
    except Exception as e:
        print(f"Ошибка записи в файл: {e}")

def process_repo():
    """Обработка нажатия кнопки, получение данных о репозитории и запись в файл."""
    repo_name = repo_entry.get()
    last_digit_str = last_digit_entry.get()
    
    try:
        last_digit = int(last_digit_str)
        if not 0 <= last_digit <= 9:
            raise ValueError("Последняя цифра должна быть от 0 до 9")
        
        repo_data = get_github_repo_info(repo_name, last_digit)
        write_to_file(repo_data)
        messagebox.showinfo("Успех", "Данные о репозитории записаны в файл.")
    except ValueError as e:
        messagebox.showerror("Ошибка", f"Неверный ввод: {e}")

def get_repo_url_from_last_digit(last_digit, repo_name):
    """Формирование URL API GitHub на основе последней цифры и имени репозитория."""
    repo_full_name = repo_mapping.get(last_digit)
    if repo_full_name is not None and repo_full_name.lower() == repo_name.lower():
        return GITHUB_API_BASE_URL + repo_full_name
    else:
        return None

root = tk.Tk()
root.title("GitHub Repo Info")
root.mainloop()